---
name: mysql

templates:
  mariadb_ctl.erb:  bin/mariadb_ctl
  my.cnf.erb:     config/my.cnf
  mariadb_init.erb: config/mariadb_init
  galera-healthcheck_ctl.erb: bin/galera-healthcheck_ctl

packages:
- mariadb
- galera
- galera-healthcheck
- common

properties:
  admin_username:
    description: 'Username for the MySQL server admin user'
    default: 'root'
  admin_password:
    description: 'Password for the MySQL server admin user'
  port:
    description: 'Port the mysql server should bind to'
    default: 3306
  max_connections:
    description: 'Maximum total number of database connections for the node'
    default: 1500
  max_user_connections:
    description: 'Max # of connections allowed for each user (binding)'
    default: 40
  innodb_buffer_pool_size:
    description: 'The size in bytes of the memory buffer InnoDB uses to cache data and indexes of its tables'
  cluster_ips:
    description: 'List of nodes'
  haproxy_mysql_user:
    description: 'A user for HAProxy health check'
  haproxy_ips:
    description: 'List of haproxy node ip addresses'

  #these two properties are also used by the Broker
  gcache_size:
    description: 'Cache size used by galera (maximum amount of data possible in an IST)'
    default: 512
  ib_log_file_size:
    description: 'Size of the ib_log_file used by innodb'
    default: 1000
